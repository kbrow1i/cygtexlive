--- origsrc/tlpkg/TeXLive/TLUtils.pm	2016-05-04 22:15:33.000000000 -0400
+++ src/tlpkg/TeXLive/TLUtils.pm	2016-05-06 12:40:59.024491900 -0400
@@ -191,6 +191,7 @@ BEGIN {
 use Cwd;
 use Getopt::Long;
 use File::Temp;
+use File::Copy qw//;
 
 use TeXLive::TLConfig;
 
@@ -2727,6 +2728,7 @@ sub _create_config_files {
       $tlpdblinesref, @postlines) = @_;
   my $root = $tlpdb->root;
   my @lines = ();
+  my $usermode = $tlpdb->setting( "usertree" );
   if (-r "$root/$headfile") {
     # we might be in user mode and do *not* want that the generation
     # of the configuration file just boils out.
@@ -2735,11 +2737,7 @@ sub _create_config_files {
     @lines = <INFILE>;
     close (INFILE);
   } else {
-    tlwarn("TLUtils::_create_config_files: $root/$headfile missing!\n");
-    # TODO
-    # if we allow tlmgr generate to generate language.* file in usermode
-    # we need to remove the die here!
-    die ("Giving up.");
+    die ("Giving up.") if (!$usermode);
   }
   push @lines, @$tlpdblinesref;
   if (defined($localconf) && -r $localconf) {
@@ -2755,17 +2753,19 @@ sub _create_config_files {
   if (@postlines) {
     push @lines, @postlines;
   }
-  if ($#lines >= 0) {
-    open(OUTFILE,">$dest")
+  if ($usermode && -e $dest) {
+    tlwarn("Updating $dest, backup copy in $dest.backup\n");
+    File::Copy::copy($dest, "$dest.backup");
+  }
+  open(OUTFILE,">$dest")
       or die("Cannot open $dest for writing: $!");
 
-    if (!$keepfirstline) {
-      print OUTFILE $cc;
-      printf OUTFILE " Generated by %s on %s\n", "$0", scalar localtime;
-    }
-    print OUTFILE @lines;
-    close(OUTFILE) || warn "close(>$dest) failed: $!";
+  if (!$keepfirstline) {
+    print OUTFILE $cc;
+    printf OUTFILE " Generated by %s on %s\n", "$0", scalar localtime;
   }
+  print OUTFILE @lines;
+  close(OUTFILE) || warn "close(>$dest) failed: $!";
 }
 
 sub parse_AddHyphen_line {
